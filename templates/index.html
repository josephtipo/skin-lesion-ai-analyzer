<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V75PKYRYGK"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-V75PKYRYGK');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#2563eb">
    <title>Skin Lesion AI Analyzer</title>
    <!-- Cache buster for layout update -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-microscope"></i>
                    <h1>Skin Lesion AI</h1>
                </div>
                <p class="subtitle">Advanced skin lesion analysis powered by a custom‑trained AI model</p>
            </div>
        </header>

        <main class="main">
            <div class="upload-section">
                <div class="upload-card">
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-content" id="uploadContent">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <h3>Upload Skin Lesion Image</h3>
                            <p>Drag and drop your image here or click to browse</p>
                            <p>For the best results, check the image quality guidelines below for tips and example images.</p>
                            <div class="supported-formats">
                                <span>Supported formats: JPG, JPEG, PNG, HEIC</span>
                            </div>
                        </div>
                        <input type="file" id="imageInput" accept="image/jpeg,image/jpg,image/png,image/heic,.heic" hidden>
                    </div>
                    
                    <div class="image-preview" id="imagePreview" style="display: none;">
                        <img id="previewImg" alt="Preview">
                        <div class="image-actions">
                            <button class="btn btn-secondary" id="changeImage">
                                <i class="fas fa-edit"></i> Change Image
                            </button>
                            <button class="btn btn-primary" id="analyzeBtn">
                                <i class="fas fa-search"></i> Analyze Image
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="results-section" id="resultsSection" style="display: none;">
                <div class="results-card">
                    <div class="results-header">
                        <i class="fas fa-chart-line"></i>
                        <h3>Analysis Results</h3>
                    </div>
                    
                    <div class="results-content">
                        <div class="prediction-main">
                            <div class="prediction-label">Predicted Diagnosis</div>
                            <div class="prediction-value" id="predictionValue">-</div>
                        </div>
                        
                        <div class="confidence-section">
                            <div class="confidence-label">Confidence Level</div>
                            <div class="confidence-bar">
                                <div class="confidence-fill" id="confidenceFill"></div>
                                <span class="confidence-text" id="confidenceText">0%</span>
                            </div>
                        </div>
                        
                        <div class="disclaimer">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p><strong>Medical Disclaimer:</strong> This AI analysis is for educational purposes only and should not replace professional medical diagnosis. Please consult a dermatologist for proper medical evaluation.</p>
                        </div>
                    </div>
                </div>
                
            </div>

            <div class="loading-overlay" id="loadingOverlay" style="display: none;">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                    <p>Analyzing your image...</p>
                </div>
            </div>
            
        </main>

        <section class="lesion-types">
            <h3>Detectable Lesion Types</h3>
            <div class="types-grid">
                <div class="type-card">
                    <h5>Melanoma (MEL)</h5>
                    <p>Most serious form of skin cancer</p>
                </div>
                <div class="type-card">
                    <h5>Melanocytic Nevus (NV)</h5>
                    <p>Common benign skin lesions (moles)</p>
                </div>
                <div class="type-card">
                    <h5>Basal Cell Carcinoma (BCC)</h5>
                    <p>Most common type of skin cancer</p>
                </div>
                <div class="type-card">
                    <h5>Actinic Keratosis (AKIEC)</h5>
                    <p>Pre-cancerous skin condition</p>
                </div>
                <div class="type-card">
                    <h5>Benign Keratosis (BKL)</h5>
                    <p>Non-cancerous skin growths</p>
                </div>
                <div class="type-card">
                    <h5>Dermatofibroma (DF)</h5>
                    <p>Benign skin nodules</p>
                </div>
                <div class="type-card">
                    <h5>Vascular Lesion (VASC)</h5>
                    <p>Blood vessel-related skin lesions</p>
                </div>
            </div>
        </section>

        <section class="image-quality-section">
            <h3>Image Quality Guidelines</h3>
            <div class="quality-content">
                <div class="quality-instructions">
                    <h4>How to Capture Quality Images</h4>
                    <div class="instruction-grid">
                        <div class="instruction-card">
                            <i class="fas fa-lightbulb"></i>
                            <h5>Proper Lighting</h5>
                            <p>Use natural daylight or bright, even artificial lighting. Avoid shadows and harsh direct light that creates glare.</p>
                        </div>
                        <div class="instruction-card">
                            <i class="fas fa-crop-alt"></i>
                            <h5>Proper Framing</h5>
                            <p>Fill the frame with the lesion area. Crop out unnecessary features like side shadows, fingers, and background distractions.</p>
                        </div>
                        <div class="instruction-card">
                            <i class="fas fa-focus"></i>
                            <h5>Sharp Focus</h5>
                            <p>Ensure the lesion is in sharp focus. Hold the camera steady and tap to focus on the lesion before taking the photo.</p>
                        </div>
                        <div class="instruction-card">
                            <i class="fas fa-ruler"></i>
                            <h5>Appropriate Distance</h5>
                            <p>Take the photo from close enough to see details clearly, but not so close that the image becomes blurry or distorted.</p>
                        </div>
                    </div>
                </div>
                
                <div class="quality-samples">
                    <h4>Image Quality Examples</h4>
                    <div class="sample-grid">
                        <div class="sample-item">
                            <img src="{{ url_for('static', filename='images/ISIC_0024323.jpg') }}" alt="Good quality lesion image example" class="sample-image">
                            <div class="sample-label good">✓ Excellent Quality</div>
                            <p class="sample-description">Clear, well-focused image with lesion prominently visible and good lighting</p>
                        </div>
                        <div class="sample-item">
                            <img src="{{ url_for('static', filename='images/ISIC_0026758.jpg') }}" alt="Good quality lesion image example" class="sample-image">
                            <div class="sample-label good">✓ Excellent Quality</div>
                            <p class="sample-description">Proper lighting and contrast with lesion details clearly visible</p>
                        </div>
                        <div class="sample-item">
                            <img src="{{ url_for('static', filename='images/ISIC_0026480.jpg') }}" alt="Good quality lesion image example" class="sample-image">
                            <div class="sample-label good">✓ Excellent Quality</div>
                            <p class="sample-description">Well-lit image with clear lesion boundaries and minimal background</p>
                        </div>
                        <div class="sample-item">
                            <img src="{{ url_for('static', filename='images/ISIC_0026738.jpg') }}" alt="Good quality lesion image example" class="sample-image">
                            <div class="sample-label good">✓ Excellent Quality</div>
                            <p class="sample-description">Good color accuracy and lesion detail visibility with proper framing</p>
                        </div>
                        <div class="sample-item">
                            <img src="{{ url_for('static', filename='images/ISIC_0026841.jpg') }}" alt="Good quality lesion image example" class="sample-image">
                            <div class="sample-label good">✓ Excellent Quality</div>
                            <p class="sample-description">Clear lesion with good contrast and proper lighting</p>
                        </div>
                        <div class="sample-item">
                            <img src="{{ url_for('static', filename='images/ISIC_0026976.jpg') }}" alt="Good quality lesion image example" class="sample-image">
                            <div class="sample-label good">✓ Excellent Quality</div>
                            <p class="sample-description">Well-defined lesion with sharp focus and appropriate distance</p>
                        </div>
                    </div>
                </div>
                
                <div class="quality-tips">
                    <h4>Additional Tips for Better Results</h4>
                    <ul class="tips-list">
                        <li><strong>Clean the area:</strong> Gently clean the skin around the lesion to remove any oils, creams, or debris that might affect image quality.</li>
                        <li><strong>Avoid flash:</strong> Use natural or ambient lighting instead of camera flash, which can cause glare and wash out important details.</li>
                        <li><strong>Multiple angles:</strong> If possible, take photos from slightly different angles to capture all aspects of the lesion.</li>
                        <li><strong>Steady hands:</strong> Use both hands to hold your device steady, or rest your elbows on a surface for stability.</li>
                        <li><strong>Check before uploading:</strong> Review your photo to ensure it's clear, well-lit, and the lesion is easily visible before analysis.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="info-section">
            <div class="info-grid">
                <div class="info-card">
                    <i class="fas fa-brain"></i>
                    <h4>AI-Powered Analysis</h4>
                    <p>Advanced EfficientNet model trained on thousands of dermatological images</p>
                </div>
                <div class="info-card">
                    <i class="fas fa-clock"></i>
                    <h4>Instant Results</h4>
                    <p>Get analysis results in seconds with detailed confidence metrics</p>
                </div>
                <div class="info-card">
                    <i class="fas fa-shield-alt"></i>
                    <h4>Privacy Protected</h4>
                    <p>Your images are processed locally and not stored on our servers</p>
                </div>
            </div>
        </section>

        <section class="training-progress">
            <h3>Training Progress & Model Performance</h3>
            <div class="progress-grid">
                <div class="progress-card">
                    <h5>Dataset Size</h5>
                    <p>Trained on 4,015 dermatoscopic images from the ISIC dataset, this marks the first phase of training. The process is still ongoing, and the skin lesion detection model will be updated as training and validation progress. The current training phase uses 401,059 images, courtesy of the International Skin Imaging Collaboration.</p>
                </div>
                <div class="progress-card">
                    <h5>Model training methodology</h5>
                    <p>This project is a supervised deep learning approach for skin lesion classification using EfficientNet - a convolutional neural network (CNN) architecture with a custom head, fine‑tuned on the ISIC dataset to identify seven lesion types.</p>
                    <p>Training images undergo advanced augmentation (random crop, flip, rotation, color jitter) and ImageNet‑based normalisation, while validation/test sets are resized and normalised.</p>
                    <p>Class imbalance is addressed by computing class weights and applying Focal Loss (gamma=2) to prioritise hard examples. Optimisation uses AdamW (lr=0.001, weight decay=0.01) over 20 epochs with batch size 32.</p>
                    <p>Metrics including accuracy, loss, and UAR are tracked via Weights & Biases, with final evaluation on a held‑out test set.</p>
                </div>
                <div class="progress-card">
                    <h5>Skin Lesion Detection AI – Phase 1 Training Results</h5>
                    <p>Using EfficientNet - a convolutional neural network (CNN) architecture with a custom classification head, the model was trained on 4,015 ISIC dermatoscopic images.</p>
                    <p>Training accuracy reached ~89%, with validation accuracy at ~76% and UAR at ~77%, closely aligned — a strong indicator of good generalisation.</p>
                    <p>Loss decreased steadily with minimal overfitting, showing the model is learning robust patterns across lesion types.</p>
                    <p>These early results set a solid foundation for further tuning and scaling with the full 401k‑image ISIC dataset.</p>
                    <div class="training-chart">
                        <img src="{{ url_for('static', filename='images/Training_Accuracy.jpeg') }}" alt="Training Accuracy Chart" class="accuracy-chart">
                    </div>
                </div>
            </div>
        </section>

        <section class="faq-section">
            <h3>Frequently Asked Questions</h3>
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">
                        <h5>What is Skin Lesion AI?</h5>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Skin Lesion AI is an advanced artificial intelligence system designed to analyze dermatoscopic images and assist in the identification of various skin lesions. Our AI model uses deep learning techniques trained on thousands of medical images to provide rapid, preliminary analysis of skin conditions.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h5>How accurate is the AI analysis?</h5>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>In the initial phase, this version of the AI model demonstrated a strong capacity to learn from data. While its accuracy on the training data reached 89%, a more important measure is its performance on new, unseen images. In this area, the model achieved an accuracy of approximately 77%.</p>
                        
                        <p>This 77% accuracy represents a strong and promising baseline for Phase 1. We anticipate significant improvements in Phase 2 as we expand the dataset and continue to refine the model.</p>
                        
                        <p>It's also important to note that accuracy can vary depending on factors like image quality and lighting conditions. To support interpretation, the AI also provides a confidence score with each analysis, indicating the reliability of the prediction.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h5>Can this replace a doctor's diagnosis?</h5>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>No, absolutely not. This AI tool is designed for educational and screening purposes only. It should never replace professional medical diagnosis or treatment. Always consult with a qualified dermatologist or healthcare provider for proper medical evaluation and treatment decisions.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h5>What types of skin lesions can it detect?</h5>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>The AI can identify 7 types of skin lesions: Melanoma (MEL), Melanocytic nevus (NV), Basal cell carcinoma (BCC), Actinic keratosis (AKIEC), Benign keratosis (BKL), Dermatofibroma (DF), and Vascular lesions (VASC).</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h5>Is my data secure and private?</h5>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, your privacy is a priority. Images are processed locally in your browser and are not stored on the servers. No personal information or images are collected, transmitted, or retained by the system.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h5>Who developed the Skin Lesion AI model?</h5>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>This AI model was developed by Joseph Mondejar as part of the Master of Artificial Intelligence program at La Trobe University. It showcases the use of supervised deep learning for medical image analysis, specifically for classifying seven types of skin lesions.</p>
                        
                        <p>The project is part of an ongoing academic journey, with a strong focus on ethics, accessibility, and the potential to support early detection of serious skin conditions like melanoma.</p>
                        
                        <p>📬 For more info or collaboration, contact Joseph at 22687842@students.latrobe.edu.au or connect via LinkedIn.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h5>How can I collaborate or provide feedback?</h5>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Your feedback and collaboration can help improve the Skin Lesion AI tool and increase its real-world impact. You can:</p>
                        
                        <ul class="collaboration-list">
                            <li>💬 Suggest improvements to usability or features</li>
                            <li>🧑‍⚕️ Contribute medical expertise or validation support</li>
                            <li>🧠 Collaborate on AI or data research</li>
                            <li>🌍 Partner on outreach to make the tool accessible in remote areas</li>
                        </ul>
                        
                        <p>To get involved or share ideas, please reach out via:</p>
                        <p>📧 Email: 22687842@students.latrobe.edu.au<br>
                        🔗 LinkedIn: joseph-mondejar-666b6b30</p>
                    </div>
                </div>
                
            </div>
        </section>

        <section class="feedback-form-section">
            <div class="feedback-form-card">
                <div class="feedback-form-header">
                    <i class="fas fa-comment-dots"></i>
                    <h3>Share Your Feedback</h3>
                </div>
                <div class="feedback-form-content">
                    <p>Help us improve the Skin Lesion AI Analyzer. Your feedback is valuable to us!</p>
                    
                    <form class="contact-form" id="feedbackForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="feedbackName">Name (Optional)</label>
                                <input type="text" id="feedbackName" name="name" placeholder="Your name">
                            </div>
                            <div class="form-group">
                                <label for="feedbackEmail">Email (Optional)</label>
                                <input type="email" id="feedbackEmail" name="email" placeholder="your.email@example.com">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="feedbackCategory">Feedback Type</label>
                            <select id="feedbackCategory" name="category" required>
                                <option value="">Please select a category</option>
                                <option value="general_feedback">General Feedback</option>
                                <option value="feature_request">Feature Request</option>
                                <option value="bug_report">Bug Report</option>
                                <option value="user_interface">User Interface</option>
                                <option value="ai_accuracy">AI Accuracy</option>
                                <option value="image_quality">Image Quality Guidelines</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="feedbackMessage">Your Message</label>
                            <textarea id="feedbackMessage" name="message" rows="5" placeholder="Please share your thoughts, suggestions, or report any issues you've encountered..." required></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" id="submitFeedbackBtn">
                                <i class="fas fa-paper-plane"></i>
                                Send Feedback
                            </button>
                        </div>
                    </form>
                    
                    <div class="feedback-success" id="feedbackSuccess" style="display: none;">
                        <div class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <h4>Thank You!</h4>
                            <p>Your feedback has been sent successfully. We appreciate your input and will use it to improve the Skin Lesion AI Analyzer.</p>
                            <button class="btn btn-secondary" id="sendAnotherFeedback">Send Another Feedback</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="medical-disclaimer">
            <div class="disclaimer-content">
                <div class="disclaimer-header">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Important Medical Disclaimer</h3>
                </div>
                <div class="disclaimer-text">
                    <p><strong>FOR EDUCATIONAL AND INFORMATIONAL PURPOSES ONLY</strong></p>
                    <p>This AI-powered skin lesion analyzer is designed solely for educational and informational purposes. It is NOT a medical diagnostic tool and should NOT be used as a substitute for professional medical advice, diagnosis, or treatment.</p>
                    
                    <ul>
                        <li><strong>Not Medical Advice:</strong> The results provided by this AI system do not constitute medical advice and should not be relied upon for medical decision-making.</li>
                        <li><strong>Consult Healthcare Professionals:</strong> Always seek the advice of qualified healthcare professionals, particularly dermatologists, for proper evaluation of skin lesions.</li>
                        <li><strong>Emergency Situations:</strong> If you notice rapid changes in a mole or lesion, bleeding, itching, or other concerning symptoms, seek immediate medical attention.</li>
                        <li><strong>Limitations:</strong> AI systems have limitations and may produce false positives or false negatives. Results should never delay or replace professional medical consultation.</li>
                        <li><strong>No Liability:</strong> The developers and operators of this tool assume no responsibility for any medical decisions made based on the AI analysis results.</li>
                    </ul>
                    
                    <p><strong>Remember:</strong> Early detection and professional medical evaluation are crucial for skin health. When in doubt, always consult a healthcare professional.</p>
                </div>
            </div>
        </section>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>